{"id":"zen-01q","title":"Add test for VerifyTimeout exception - verify it's raised when Claude returns no output","description":"","notes":"Added TestVerifyTimeoutException with 4 tests including phase_verify raises on no output","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T07:24:53.0464489-05:00","updated_at":"2025-12-25T08:18:08.572006-05:00","closed_at":"2025-12-25T08:18:08.572006-05:00"}
{"id":"zen-0da","title":"verify.py uses MODEL_HANDS instead of MODEL_EYES for running tests - design doc specifies haiku but code uses sonnet","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T07:24:39.9256492-05:00","updated_at":"2025-12-25T07:30:24.235132-05:00","closed_at":"2025-12-25T07:30:24.235132-05:00"}
{"id":"zen-10o","title":"Extract judge.py from core.py","description":"","notes":"Created judge.py with build_judge_prompt(), build_judge_fix_prompt(), _git_has_head(), _git_is_repo(), _is_test_or_doc(), should_skip_judge_ctx(), phase_judge_ctx(). Core.py keeps original functions during transition.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T19:58:07.1339375-05:00","updated_at":"2025-12-24T20:46:25.9046057-05:00","closed_at":"2025-12-24T20:46:25.9046057-05:00","labels":["phase-0","refactor"]}
{"id":"zen-1t9","title":"Phase 1: Build standalone test runner - detect project type, run tests via subprocess, parse results (prove concept)","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T07:35:20.6479225-05:00","updated_at":"2025-12-25T07:35:20.6479225-05:00","labels":["needs-planning"]}
{"id":"zen-1xc","title":"Detect task completion from previous zen run","description":"At the beginning of a zen run, detect if the previous run already completed the task. Prevents redundant work when resuming.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T19:17:36.527424-05:00","updated_at":"2025-12-23T19:40:23.2110785-05:00","closed_at":"2025-12-23T19:40:23.2110785-05:00","close_reason":"Implemented using final_notes.md cost summary detection. Added _check_previous_completion() and 3 unit tests.","labels":["enhancement","p1"]}
{"id":"zen-241","title":"Phase 3: Integrate test runner with scout.md - verify reads project info from scout output and runs tests directly","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T07:35:32.9492038-05:00","updated_at":"2025-12-25T07:35:32.9492038-05:00","labels":["needs-planning"]}
{"id":"zen-329","title":"Add parse_targeted_files helper to utils.py","description":"Extract file paths from ## Targeted Files section of scout.md. See docs/plan.md Step 2.2","notes":"Implemented in scout.py:17 instead of utils.py - scout-specific so kept with scout module.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T19:58:57.2285008-05:00","updated_at":"2025-12-25T13:23:12.4682522-05:00","closed_at":"2025-12-25T14:00:00-05:00","labels":["enhancement","phase-2"]}
{"id":"zen-3m0","title":"Phase 2: Add project type and test command detection to scout prompt output","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T07:35:26.2706971-05:00","updated_at":"2025-12-25T07:35:26.2706971-05:00","labels":["needs-planning"]}
{"id":"zen-3n0","title":"Investigate scout.py grep_impact - improve cross-language file reference detection","description":"","notes":"grep_impact() currently hardcodes *.py for file search. zen supports all languages, so this needs a smarter approach. Options: 1) Derive extension from target file, 2) Use language-aware patterns, 3) Search all text files. Need to consider performance (searching all files could be slow) vs coverage.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T07:50:17.2038554-05:00","updated_at":"2025-12-26T07:50:32.5498178-05:00"}
{"id":"zen-4q0","title":"Add grep_impact for Golden Rule enforcement","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T19:58:08.7701515-05:00","updated_at":"2025-12-24T20:55:39.7463949-05:00","closed_at":"2025-12-24T20:55:39.7463949-05:00","labels":["enhancement","phase-0"]}
{"id":"zen-4qp","title":"Add interface-first enforcement to plan validation","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T19:58:10.53507-05:00","updated_at":"2025-12-24T21:25:14.7486372-05:00","closed_at":"2025-12-24T21:25:14.7486372-05:00","labels":["enhancement","phase-0"]}
{"id":"zen-5e5","title":"Linter: Per-line disable comments","description":"Add syntax: secret = 'x' # zenlint: ignore POSSIBLE_SECRET. Implementation: IGNORE_PATTERN = re.compile(r'#\\s*zenlint:\\s*ignore\\s+(\\w+)'). Location: src/zen_mode/linter.py. Effort: ~20 LOC","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:17:41.856418-05:00","updated_at":"2025-12-23T20:48:16.1621348-05:00","closed_at":"2025-12-23T20:48:16.1621348-05:00","labels":["enhancement","p2"]}
{"id":"zen-5yo","title":"Extract implement.py from core.py","description":"","notes":"Created implement.py with run_linter_with_timeout(), backup_scout_files_ctx(), build_verify_prompt(), build_implement_prompt(), build_escalation_suffix(), phase_implement_ctx(). Legacy wrappers provided. Core.py keeps original functions during transition.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T19:58:05.3670404-05:00","updated_at":"2025-12-24T20:41:54.1702095-05:00","closed_at":"2025-12-24T20:41:54.1702095-05:00","labels":["phase-0","refactor"]}
{"id":"zen-6a5","title":"Extract Context dataclass from utils.py to context.py","description":"Move Context dataclass from utils.py to dedicated context.py module. Update imports across codebase.","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-26T06:21:21.7720187-05:00","updated_at":"2025-12-26T06:21:21.7720187-05:00","labels":["refactor"]}
{"id":"zen-6e6","title":"Inject zen constitution into PLAN prompt","description":"Extract ARCHITECTURE and PROCESS sections from defaults/CLAUDE.md and inject into plan prompt. See docs/plan.md Step 1.1","notes":"Added load_constitution() to utils.py with 9 tests. Plan prompt now injects GOLDEN RULES, ARCHITECTURE, PROCESS. Added header format (Goal/Architecture/Dependencies). Created docs/prompts.md reference.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T19:58:32.3423426-05:00","updated_at":"2025-12-25T13:13:17.8571649-05:00","closed_at":"2025-12-25T13:00:00-05:00","labels":["enhancement","phase-1"]}
{"id":"zen-90k","title":"Capture lint baseline after scout completes","description":"Run linter on targeted files after scout and store baseline in scout.md. Enables ratchet model. See docs/plan.md Step 2.1. PLANNING REQUIRED: (1) Define baseline format - by file+code or file+code+count? (2) Handle missing files gracefully (3) Test with empty baseline (4) Test with pre-existing violations (5) Fallback if linter unavailable (6) Clear logging of what baseline captured","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T19:58:55.9801595-05:00","updated_at":"2025-12-25T14:24:39.9938505-05:00","labels":["enhancement","needs-planning","phase-2"]}
{"id":"zen-9k9","title":"Phase 3 requirement: Fallback to LLM-based verify if direct test runner fails (unknown project, command error, parse failure)","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T07:37:56.3334838-05:00","updated_at":"2025-12-25T07:37:56.3334838-05:00","labels":["needs-planning"]}
{"id":"zen-9qs","title":"Implement categorized delta lint ratchet in implement phase","description":"Count violations by (file, error_code) ignoring line numbers. Only fail on NEW violations. Handles line shifts from insertions. See docs/plan.md Step 2.3. PLANNING REQUIRED: (1) Edge case: file renamed - treat as new file? (2) Edge case: file deleted - remove from baseline? (3) Edge case: violation fixed then reintroduced same step (4) Fallback: if ratchet check errors, warn but don't block (5) Clear diff output showing exactly what's new vs baseline (6) Test: multiple files, mixed results (7) Test: baseline missing for new file (8) Dry-run mode to preview without blocking","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-24T19:58:58.5287746-05:00","updated_at":"2025-12-25T14:25:18.1384307-05:00","labels":["enhancement","needs-planning","phase-2"]}
{"id":"zen-9vk","title":"Failure-triggered pause after consecutive retries","description":"After 2 consecutive retries on different steps, pause and log: '[CHECKPOINT] Multiple retries detected. Something may be wrong with plan.' Prevents infinite loop token burn.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T19:17:40.7263494-05:00","updated_at":"2025-12-23T20:04:50.8897645-05:00","closed_at":"2025-12-23T20:04:50.8897645-05:00","close_reason":"Added consecutive retry tracking with checkpoint warning. 4 unit tests document the logic.","labels":["enhancement","p1"]}
{"id":"zen-aok","title":"Inject zen constitution into IMPLEMENT prompt","description":"Extract GOLDEN RULES, CODE STYLE, TESTING sections from defaults/CLAUDE.md and inject into implement prompt. See docs/plan.md Step 1.3","notes":"Added load_constitution() call to build_implement_prompt(). Injects GOLDEN RULES, CODE STYLE, TESTING.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T19:58:35.3504343-05:00","updated_at":"2025-12-25T13:20:08.1018132-05:00","closed_at":"2025-12-25T13:30:00-05:00","labels":["enhancement","phase-1"]}
{"id":"zen-aum","title":"Extract file ops from utils.py to files.py","description":"Move file I/O functions from utils.py to dedicated files.py module: read_file, write_file, backup_file, load_constitution, should_ignore_path, get_changed_filenames. Update imports across codebase.","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-26T06:21:20.0651453-05:00","updated_at":"2025-12-26T06:21:20.0651453-05:00","labels":["refactor"]}
{"id":"zen-az0","title":"Context tracking with session threshold reset","description":"Track context and start new sessions when reaching threshold instead of new context for each step. Enables batching work across steps, model builds on its own context. Tradeoff: results become path-dependent, harder to resume.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T19:18:06.0225881-05:00","updated_at":"2025-12-23T19:18:31.1686412-05:00","labels":["enhancement","p3"]}
{"id":"zen-b57","title":"Replace PLAN GOOD/BAD examples with symbol references","description":"Update PLAN prompt examples to show interfaces-first structure and symbol references instead of line numbers. See docs/plan.md Step 1.2","notes":"Already done - GOOD PLAN example shows interfaces-first with symbol references (User.validate_email(), register_user()).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T19:58:33.8772701-05:00","updated_at":"2025-12-25T13:23:14.9186553-05:00","closed_at":"2025-12-25T14:00:00-05:00","labels":["enhancement","phase-1"]}
{"id":"zen-bpn","title":"File size annotations in scout output","description":"Add [LARGE] / [MASSIVE] tags to file tree in scout prompt. Prevents model wasting tokens reading massive files. Effort: ~25 LOC","notes":"Added count_lines_safe(), file_size_tag(), annotate_file_sizes() to scout.py. Thresholds: LARGE=500, MASSIVE=2000 lines. Section-aware: only annotates Targeted Files and Context Files, skips Deletion Candidates. 17 tests in test_file_size_annotation.py.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T19:18:03.0019136-05:00","updated_at":"2025-12-25T15:03:29.6680991-05:00","closed_at":"2025-12-25T15:00:00-05:00","labels":["enhancement","p3"]}
{"id":"zen-bzh","title":"Rename TestState enum to VerifyState to avoid PytestCollectionWarning","description":"","notes":"Renamed TestState to VerifyState across verify.py, judge.py, test_verify.py, test_constitution_in_fix_prompt.py","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T07:25:01.4015262-05:00","updated_at":"2025-12-25T08:18:07.2658307-05:00","closed_at":"2025-12-25T08:18:07.2658307-05:00"}
{"id":"zen-cdr","title":"Extract log function from utils.py","description":"Move log() function from utils.py. Could go in context.py (since it uses log_file from Context) or its own logging.py. Update imports across codebase.","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-26T06:21:25.0933144-05:00","updated_at":"2025-12-26T06:21:25.0933144-05:00","labels":["refactor"]}
{"id":"zen-cg8","title":"Make linter pure: remove git integration","description":"Remove get_git_changes() from linter.py. Linter should be pure: accept file list, return violations. Caller (CLI, ratchet) handles git integration via git.py. This simplifies testing and separates concerns.","status":"open","priority":2,"issue_type":"chore","created_at":"2025-12-26T06:31:34.3790546-05:00","updated_at":"2025-12-26T06:31:34.3790546-05:00","labels":["refactor"]}
{"id":"zen-dqh","title":"Add escalation-specific example to IMPLEMENT prompt","description":"Add example showing targeted fix vs over-engineering on Opus escalation. No filler rule. See docs/plan.md Step 1.5","notes":"Added ESCALATION_EXAMPLES block with BAD (over-engineering) and GOOD (targeted fix) examples to build_escalation_suffix().","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T19:58:38.47006-05:00","updated_at":"2025-12-25T13:29:51.5453983-05:00","closed_at":"2025-12-25T14:15:00-05:00","labels":["enhancement","phase-1"]}
{"id":"zen-ecd","title":"Extract plan.py from core.py","description":"","notes":"Created plan.py with build_plan_prompt(), parse_steps(), validate_plan_efficiency(), get_completed_steps(), phase_plan_ctx(). Core.py imports these functions from plan.py. Updated test_sync.py for moved functions. get_completed_steps now takes log_file parameter for dependency injection.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T19:58:03.7030788-05:00","updated_at":"2025-12-24T20:34:57.49782-05:00","closed_at":"2025-12-24T20:34:57.49782-05:00","labels":["phase-0","refactor"]}
{"id":"zen-g1l","title":"Extract git.py module from scattered git operations","description":"Consolidate git operations from linter.py, judge.py, utils.py, scout.py into dedicated git.py module. Functions: is_git_repo(), get_head_commit(), get_changed_files(), get_change_stats(), grep_files(). Add comprehensive tests.","notes":"Created git.py module with: is_repo(), has_head(), get_head_commit(), get_staged_files(), get_unstaged_files(), get_untracked_files(), get_changed_files(), get_diff_stats(), grep_files(). Updated linter.py, judge.py, utils.py to use it. scout.py blocked on zen-3n0 (cross-language grep investigation). All 516 tests pass.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-26T06:31:33.312603-05:00","updated_at":"2025-12-26T07:55:07.4183786-05:00","closed_at":"2025-12-26T07:55:07.4183786-05:00","labels":["refactor"]}
{"id":"zen-gfq","title":"test_scout.py::test_finds_references_via_git_grep fails due to dict ordering - should compare sets or sort before comparing","description":"","notes":"Fixed by comparing sets instead of lists in test assertion","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T07:24:46.8718273-05:00","updated_at":"2025-12-25T08:02:40.4632204-05:00","closed_at":"2025-12-25T08:02:40.4632204-05:00"}
{"id":"zen-hyi","title":"Extract shared helpers to utils.py + Context dataclass","description":"","notes":"Added to utils.py: Context dataclass, log(), read_file(), write_file(), backup_file(), run_claude(). New signatures support dependency injection for testing. Core.py retains old functions until phases are extracted (0.2-0.5).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T19:58:00.7334765-05:00","updated_at":"2025-12-24T20:07:25.9220238-05:00","closed_at":"2025-12-24T20:07:25.9220238-05:00","labels":["phase-0","refactor"]}
{"id":"zen-j6v","title":"Extract Claude API from utils.py to claude.py","description":"Move Claude CLI wrapper from utils.py to dedicated claude.py module: run_claude, _init_claude, _parse_json_response, _extract_cost. Update imports across codebase.","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-26T06:21:23.4321126-05:00","updated_at":"2025-12-26T06:21:23.4321126-05:00","labels":["refactor"]}
{"id":"zen-mii","title":"Add project type and test command detection to scout phase - verify can run tests directly via subprocess instead of asking Claude","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T07:32:27.2423214-05:00","updated_at":"2025-12-25T07:35:15.318317-05:00","closed_at":"2025-12-25T07:35:15.318317-05:00"}
{"id":"zen-ni3","title":"Extract scout.py from core.py","description":"","notes":"Created scout.py with build_scout_prompt() and phase_scout_ctx(). Core.py imports build_scout_prompt from scout.py. Legacy phase_scout() wrapper provided for backward compat. Updated test_sync.py to mark build_scout_prompt as intentionally different.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T19:58:02.1429929-05:00","updated_at":"2025-12-24T20:20:25.132355-05:00","closed_at":"2025-12-24T20:20:25.132355-05:00","labels":["phase-0","refactor"]}
{"id":"zen-oqo","title":"Auto-calculate worker count based on task complexity","description":"Instead of requiring --workers flag, analyze task to determine optimal parallelism. Current: hardcoded default of 2.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T19:17:37.551865-05:00","updated_at":"2025-12-23T20:36:38.5508096-05:00","closed_at":"2025-12-23T20:36:38.5508096-05:00","close_reason":"Auto-calculate workers = min(tasks, cpu_count, 8). Added 5 unit tests for the calculation logic.","labels":["enhancement","p1"]}
{"id":"zen-ot1","title":"Linter: Language-specific rule scoping","description":"Rules like INLINE_IMPORT trigger on non-applicable languages. Add RULE_EXTENSIONS mapping: {'INLINE_IMPORT': {'py','js','ts','tsx','jsx'}, 'POSSIBLE_SECRET': {'*'}, ...}. Location: src/zen_mode/linter.py. Effort: ~40 LOC","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:18:02.0556896-05:00","updated_at":"2025-12-23T20:55:03.7830279-05:00","closed_at":"2025-12-23T20:55:03.7830279-05:00","labels":["enhancement","p2"]}
{"id":"zen-qje","title":"Enhance --dry-run output","description":"Current --dry-run output is minimal. Improvements: (1) Print prompts that would be sent, (2) Show which files would be created, (3) Add --verbose flag for details. Effort: ~30 LOC","notes":"Removed --dry-run entirely. Unlike terraform plan, zen cannot predict execution paths without running Claude. The feature was fundamentally broken and architecturally unsound.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T19:18:03.9955581-05:00","updated_at":"2025-12-25T21:35:43.1343447-05:00","closed_at":"2025-12-25T21:35:43.1343447-05:00","labels":["enhancement","p3"]}
{"id":"zen-qos","title":"Phase 3 requirement: Log visibility - show when direct test runner is used vs LLM fallback, include timing and reason for fallback","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T07:40:24.1599286-05:00","updated_at":"2025-12-25T07:40:24.1599286-05:00","labels":["needs-planning"]}
{"id":"zen-sap","title":"Add few-shot scope examples to IMPLEMENT prompt","description":"Add GOOD/BAD examples showing scope discipline - minimal complete vs scope creep. See docs/plan.md Step 1.4","notes":"Added EXAMPLES block with BAD (scope creep) and GOOD (minimal complete) examples.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T19:58:36.7845876-05:00","updated_at":"2025-12-25T13:20:21.8424863-05:00","closed_at":"2025-12-25T13:30:00-05:00","labels":["enhancement","phase-1"]}
{"id":"zen-sr2","title":"Add preflight check for source files and task clarity","description":"Before coding, verify: (1) Do you have the source code for files to edit? (2) Is the task clearly defined? Output machine-parseable PREFLIGHT: FILES=YES/NO, TASK=YES/NO. Abort with STEP_BLOCKED if NO.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T19:17:39.6188045-05:00","updated_at":"2025-12-23T20:18:57.8720787-05:00","closed_at":"2025-12-23T20:18:57.8720787-05:00","close_reason":"Added \u003cpreflight\u003e block to implement prompts. Agent verifies files and task clarity before coding, outputs STEP_BLOCKED if either is missing.","labels":["enhancement","p1"]}
{"id":"zen-ty5","title":"Add tests for untested linter functions","description":"Add tests for: format_report() (JSON, SARIF, text formats), load_config() (.lintrc.json loading), print_rules() output. These are currently untested paths.","status":"open","priority":2,"issue_type":"chore","created_at":"2025-12-26T06:31:35.4766195-05:00","updated_at":"2025-12-26T06:31:35.4766195-05:00","labels":["testing"]}
{"id":"zen-u0o","title":"Documentation cleanup and organization","description":"Current docs mess: user-facing mixed with internal design docs, no Fast Track docs, no index/navigation, README out of sync and bloated. Need clear distinction between 'how it works' vs 'planned improvements'.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T19:18:07.1659115-05:00","updated_at":"2025-12-23T19:18:31.487825-05:00","labels":["docs","p3"]}
{"id":"zen-z23","title":"Fix ticker display bug (progress going backwards)","description":"Swarm ticker showed '2/3 done' then '1/3 done' - progress went backwards. Need to investigate status collection logic in swarm.py:640.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T19:17:38.5611071-05:00","updated_at":"2025-12-23T20:28:16.1598414-05:00","closed_at":"2025-12-23T20:28:16.1598414-05:00","close_reason":"Added high-water mark tracking to prevent ticker from showing backwards progress. Defensive fix for edge cases.","labels":["bug","p1"]}
{"id":"zen-zds","title":"Break up core.py god class","description":"core.py is 1000+ LOC single file. Target structure: state.py (WorkDir, TaskState), planner.py (Scout, Plan), hands.py (Implement), judge.py (Judge), files.py (helpers). Effort: ~200+ LOC refactor. Defer until pain point.","notes":"Superseded by granular Phase 0 beads: zen-hyi, zen-ni3, zen-ecd, zen-5yo, zen-10o, zen-4q0, zen-4qp","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T19:18:05.0147069-05:00","updated_at":"2025-12-24T20:00:05.8694156-05:00","closed_at":"2025-12-24T20:00:05.8694156-05:00","labels":["p3","refactor"]}
